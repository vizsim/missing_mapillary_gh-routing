# MapLibre GraphHopper Routing

**Proof of Concept** - Eine interaktive Web-Anwendung fÃ¼r Routenplanung mit GraphHopper-Integration, HÃ¶henprofil-Visualisierung und Kontext-Layern fÃ¼r Radinfrastruktur und Mapillary-Abdeckung.

> âš ï¸ Dieses Repository dient als **Template** fÃ¼r weitere Projekte. Siehe [Verwendung als Template](#verwendung-als-template) fÃ¼r mehr Informationen.

---

## Features

- **Multi-Profile Routing**: UnterstÃ¼tzung fÃ¼r verschiedene Verkehrsmittel (Auto, Fahrrad, etc.)
- **Interaktive Routenplanung**: Start- und Endpunkt per Klick oder Geocoding setzen
- **Route-Visualisierung**: Farbcodierte Darstellung basierend auf Mapillary Coverage, Surface und Road Class
- **HÃ¶henprofil**: Interaktives Canvas-basiertes HÃ¶henprofil mit Hover-FunktionalitÃ¤t und Encoded Values Overlay
- **Kontext-Layer**: Radinfrastruktur (OpenStreetMap, FixMyCity) und Mapillary Missing Streets (OpenStreetMap, OSM-Verkehrswendegruppe) mit Toggle-FunktionalitÃ¤t
- **Permalink**: VollstÃ¤ndige State-Speicherung in der URL (Kartenposition, Route, Profil, Layer)
- **GPX-Export**: Export berechneter Routen als GPX-Datei

---

## Technische Details

### Framework & Bibliotheken
- **MapLibre GL JS** (v5.6.0): Kartenvisualisierung
- **GraphHopper Routing API**: Routenberechnung
- **Photon Geocoder**: Adresssuche und Geocoding

### Datenquellen
- **GraphHopper API**: Routenberechnung
- **OpenStreetMap**: Basiskartendaten
- **FixMyCity** / **tilda-geo.de**: Vektortiles fÃ¼r Radinfrastruktur
- **OSM Verkehrswende**: Mapillary Missing Streets Daten
- **MapTiler** (optional): Hillshade und Terrain-Daten
- **Sonny's Terrain Models**: HÃ¶henmodelle fÃ¼r Elevation-Daten (CC BY 4.0) - [sonny.4lima.de](https://sonny.4lima.de)

---

## Projektstruktur

```
maplibre_routing/
â”œâ”€â”€ index.html                    # Haupt-HTML-Datei
â”œâ”€â”€ main.js                       # Haupt-Initialisierung
â”œâ”€â”€ style.css                     # Stylesheet
â”œâ”€â”€ style.json                    # MapLibre Style-Konfiguration
â”œâ”€â”€ logo.svg                      # Logo
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config/                   # Konfiguration
â”‚   â”‚   â”œâ”€â”€ config.js             # Lokale Konfiguration (nicht versioniert)
â”‚   â”‚   â””â”€â”€ config.public.js     # Ã–ffentliche Konfiguration
â”‚   â”œâ”€â”€ routing/                   # Routing-Module
â”‚   â”‚   â”œâ”€â”€ routing.js            # Haupt-Routing-Logik
â”‚   â”‚   â”œâ”€â”€ routingUI.js          # UI-Handler
â”‚   â”‚   â”œâ”€â”€ routeState.js         # State Management
â”‚   â”‚   â”œâ”€â”€ routeVisualization.js # Route-Farben & Hover
â”‚   â”‚   â”œâ”€â”€ colorSchemes.js       # Farb-Schemas
â”‚   â”‚   â”œâ”€â”€ customModel.js        # Custom Routing Model
â”‚   â”‚   â”œâ”€â”€ gpxExport.js          # GPX-Export
â”‚   â”‚   â””â”€â”€ heightgraph/          # HÃ¶henprofil-Module
â”‚   â”‚       â”œâ”€â”€ heightgraph.js
â”‚   â”‚       â”œâ”€â”€ heightgraphCanvas.js
â”‚   â”‚       â”œâ”€â”€ heightgraphConfig.js
â”‚   â”‚       â”œâ”€â”€ heightgraphDrawing.js
â”‚   â”‚       â”œâ”€â”€ heightgraphInteractivity.js
â”‚   â”‚       â”œâ”€â”€ heightgraphStats.js
â”‚   â”‚       â””â”€â”€ heightgraphUtils.js
â”‚   â”œâ”€â”€ mapdata/                  # Karten-Datenquellen & Layer
â”‚   â”‚   â”œâ”€â”€ sources.js            # Datenquellen-Definitionen
â”‚   â”‚   â”œâ”€â”€ basicLayers.js        # Basis-Layer
â”‚   â”‚   â”œâ”€â”€ bikeLanesLayers.js    # Radinfrastruktur-Layer
â”‚   â”‚   â””â”€â”€ missingStreetsLayers.js # Mapillary Missing Streets Layer
â”‚   â”œâ”€â”€ ui/                       # UI-Komponenten
â”‚   â”‚   â”œâ”€â”€ setupBaseLayerControls.js
â”‚   â”‚   â”œâ”€â”€ panelPositioning.js
â”‚   â”‚   â””â”€â”€ toggleHandlers.js
â”‚   â””â”€â”€ utils/                    # Utilities
â”‚       â”œâ”€â”€ permalink.js          # Permalink-FunktionalitÃ¤t
â”‚       â””â”€â”€ geocoder.js           # Geocoding
â””â”€â”€ thumbs/                       # Thumbnails fÃ¼r Basemaps
```

---

## Verwendung als Template

Dieses Repository dient als **Template-Repository** fÃ¼r neue Projekte. Die folgenden Repositories nutzen dieses Template als Basis:

- **missing_mapillary_gh-routing** - [https://github.com/vizsim/missing_mapillary_gh-routing] - *kommt noch*
- **custom_bicycle_gh-routing** - [https://github.com/vizsim/custom_bicycle_gh-routing] - *kommt noch*

> ðŸ’¡ Um ein neues Projekt aus diesem Template zu erstellen, verwende die GitHub Template-Funktion oder forke dieses Repository.

---

## Lizenz

Die Lizenz wird in KÃ¼rze hinzugefÃ¼gt.

---

## Credits

- **MapLibre GL JS**: Open-Source Kartenbibliothek
- **GraphHopper**: Open-Source Routing-Engine
- **OpenStreetMap**: Community-getriebene Kartendaten
- **Mapillary**: Street View Fotos und Coverage-Daten
- **FixMyCity** / **tilda-geo.de**: Vektortiles fÃ¼r Radinfrastruktur - [tilda-geo.de](https://tilda-geo.de)
- **OSM Verkehrswende**: Mapillary Missing Streets Daten - [osm-verkehrswende.org](https://www.osm-verkehrswende.org)
- **Sonny's Terrain Models**: HÃ¶henmodelle (CC BY 4.0) - [sonny.4lima.de](https://sonny.4lima.de)
